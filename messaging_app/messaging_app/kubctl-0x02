#!/bin/bash
# Script for Blue-Green Deployment of Django app

set -e

echo "ğŸ”¹ Deploying BLUE version..."
kubectl apply -f messaging_app/blue_deployment.yaml

echo "ğŸ”¹ Deploying GREEN version..."
kubectl apply -f messaging_app/green_deployment.yaml

echo "âœ… Both BLUE and GREEN deployments applied."

echo "ğŸ” Checking pods..."
kubectl get pods

echo "ğŸ” Checking logs for GREEN deployment..."
GREEN_POD=$(kubectl get pods -l app=messaging-app,version=green -o jsonpath="{.items[0].metadata.name}")
kubectl logs $GREEN_POD
