#!/bin/bash
# kurbeScript - Setup and verify a local Kubernetes cluster using Minikube
# Author: Nouhan Doumbouya
# Description: Starts Minikube, checks the cluster status, and lists pods

echo "🚀 Checking if Docker is running..."
if ! docker info > /dev/null 2>&1; then
    echo "❌ Docker is not running. Please start Docker Desktop or the Docker service."
    exit 1
fi

echo "✅ Docker is running."

echo "🚀 Starting Minikube cluster..."
minikube start --driver=docker

if [ $? -ne 0 ]; then
    echo "❌ Failed to start Minikube cluster."
    exit 1
fi

echo "✅ Minikube cluster started successfully."

echo "🔍 Verifying Kubernetes cluster info..."
kubectl cluster-info

if [ $? -ne 0 ]; then
    echo "❌ Failed to retrieve cluster info. Please check your setup."
    exit 1
fi

echo "📦 Retrieving available pods..."
kubectl get pods --all-namespaces

echo "🎉 Kubernetes local cluster is up and running!"
