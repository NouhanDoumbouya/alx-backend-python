#!/bin/bash
# kurbeScript - Setup and verify a local Kubernetes cluster using Minikube
# Author: Nouhan Doumbouya
# Description: Starts Minikube, checks the cluster status, and lists pods

echo "ğŸš€ Checking if Docker is running..."
if ! docker info > /dev/null 2>&1; then
    echo "âŒ Docker is not running. Please start Docker Desktop or the Docker service."
    exit 1
fi

echo "âœ… Docker is running."

echo "ğŸš€ Starting Minikube cluster..."
minikube start --driver=docker

if [ $? -ne 0 ]; then
    echo "âŒ Failed to start Minikube cluster."
    exit 1
fi

echo "âœ… Minikube cluster started successfully."

echo "ğŸ” Verifying Kubernetes cluster info..."
kubectl cluster-info

if [ $? -ne 0 ]; then
    echo "âŒ Failed to retrieve cluster info. Please check your setup."
    exit 1
fi

echo "ğŸ“¦ Retrieving available pods..."
kubectl get pods --all-namespaces

echo "ğŸ‰ Kubernetes local cluster is up and running!"
